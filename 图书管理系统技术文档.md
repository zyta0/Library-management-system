# 图书管理系统技术文档

- #### 需求：轮播图制作

  解决方案：

  - 设置最外层盒子：用来展示图片，大小与每张图片的大小相同
  - 设置内层盒子：用来存放展示的图片，项目里为三张图片，故内层盒子大小为外层盒子的三倍
  - 设置定时器：每隔一段时间内层盒子的位置(`div.style.left`)向左移动一张图片宽度大小的距离
  - 设置外层盒子CSS样式：`overflow:hidden;`  超出外层盒子的部分将被隐藏
  - 设置过渡效果：让轮播图滑动看起来更加丝滑

- #### 需求：点击按钮左右切换

  解决方案：大致思路与轮播图相同

  - 设置最外层盒子：用来展示内容，用户可以看到的一部分
  - 设置内层盒子：用来存放需要展示的内容
  - 绑定点击事件：为按钮绑定点击事件，当用户点击向左或向右时改变内层盒子的位置，从而达到切换效果
  - 设置外层盒子CSS样式：`overflow:hidden;`超出外层盒子的内容不显示
  - 设置过渡效果：让切换看起来更加丝滑

- #### 需求：点击书籍跳转书籍详情页（页面传参）

  解决方案：

  - 当用户点击了书籍之后，获取到书籍的名称
  - 将书籍的名称拼接到需要跳转的URL上
  - 书籍详情页需要拿到URL   `location.search`  获取到URL中问号之后的部分
  - 将拿到的数据进行切割`split`，拿到发送请求所需要的书籍名称
  - 如果书籍名称是汉字，那么上一步拿到的字符串是经过百分号编码的，需要解码`decodeURIComponent();`
  - 将拿到的参数放入请求的地方即可

- #### 需求：实时对用户输入的信息校验，不符合规则时在输入框右侧提示

  解决方案：

  - 在每个输入框右侧设置<span>，可显示文字即可
  - 为输入框绑定失去焦点事件`blur`，当用户的鼠标离开当前输入框后执行校验函数，不符合规则在输入框右侧显示提示内容，符合规则则将右侧中的内容设置为空

- #### 需求：设置填写信息时的可选择内容

  解决方案：

  - 将选择内容放在一个盒子中，盒子正常情况下不显示`display:none;`
  - 当鼠标指针移动到输入框时，显示盒子`display:block;`
  - 为盒子添加点击事件：当用户点击盒子中的文字时，将输入框中的文字替换为用户点击的文字

- #### 需求：发送请求前检查用户输入的信息是否完整、无误，有则拦截请求

  解决方案：

  - 检查用户信息是否完整：
    - 获取到所有输入框进行遍历，查看是否有输入框内容为空，为空则说明信息不完整

  - 检查用户信息是否无误：
    - 获取到输入框右侧<span>进行遍历，查看内容是否为空，不为空则说明用户信息有误

- #### 需求：判断用户是否登录，若登录则隐藏首页右上角登录注册入口

  解决方案：

  - 用户登录后拿到后端返回的token，获取当前时间戳，将二者放入对象中
  - 将得到的对象序列化放入`localStorage`中
  - 每次打开首页时执行校验函数
  - 校验函数会从`localStorage`中拿出之前存入的对象，若拿不到则说明用户未登录；
  - 如果能拿到之前存入的对象，则将对象反序列化，获取当前时间戳，与对象中的时间戳相减，若结果在规定区间内则说明该token未过期，否则过期，过期则将`localStorage`中的对象删除
  - 若token未过期，则将右上角的登录注册接口隐藏`display:none;`，否则不变

- #### 需求：点击导航栏跳转相应页面或页面内指定位置

  解决方案：

  - 获取所有导航栏里的内容并绑定点击事件
  - 利用`<a>`标签的herf属性，在里面加入跳转页面的链接或页面内指定位置的id

- #### 需求：根据书库中图书的个数实时改变页面上展示图书的个数

  解决方案：

  - 从后端拿到需要展示的图书的信息
  - 遍历信息数组，在遍历的同时用`innerHTML`将图书的相关元素添加到页面上
  - 加上指定的类名，使其成为指定的样式

- #### 需求：用户点击修改按钮才可修改，否则只可查看

  解决方案：

  - 获取页面上所有的修改按钮，遍历并绑定点击事件

  - 利用`disabled`属性使用户在未点击时无法选中并修改

  - 用户点击后获取点击的修改按钮的序号，将该数组内的所有的输入框`disabled`属性值改为`false`

  - 在用户点击保存按钮后再将属性值改回`true`